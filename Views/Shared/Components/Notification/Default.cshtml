@model QuanLyChiTieu.ViewModels.NotificationViewModel

<div class="dropdown">
    <a class="btn-icon notification-bell" href="#" role="button" id="notificationDropdown" data-bs-toggle="dropdown" aria-expanded="false" title="Thông báo">
        <i class="bi bi-bell-fill"></i>
        @if (Model.UnreadCount > 0)
        {
                <span class="badge rounded-pill bg-danger notification-count">
                @Model.UnreadCount
                </span>
        }
    </a>

    <ul class="dropdown-menu dropdown-menu-end notification-dropdown" aria-labelledby="notificationDropdown">
        <li class="dropdown-header">
            <span>Bạn có @Model.UnreadCount thông báo mới</span>
        </li>
        <li><hr class="dropdown-divider"></li>

        @if (Model.RecentNotifications.Any())
        {
            @foreach (var item in Model.RecentNotifications)
            {
                        <li class="notification-item @(item.DaDoc == false ? "unread" : "")">
                            <a class="dropdown-item d-flex align-items-center" asp-controller="ThongBao" asp-action="Index">
                                <div class="me-3">
                                    <i class="bi bi-exclamation-circle text-warning"></i>
                                </div>
                                <div>
                                    <p class="mb-0">@item.NoiDung</p>
                                    <small class="text-muted">@($"{item.NgayGui:HH:mm, dd/MM/yyyy}")</small>
                                </div>
                            </a>
                        </li>
            }
        }
        else
        {
                <li class="text-center p-3 text-muted">Không có thông báo nào.</li>
        }

        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-footer">
            <a class="dropdown-item text-center" asp-controller="ThongBao" asp-action="Index">Xem tất cả thông báo</a>
        </li>
    </ul>
</div>